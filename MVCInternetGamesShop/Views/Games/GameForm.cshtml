@model MVCInternetGamesShop.ViewModels.GameFormViewModel

@{
    ViewBag.Title = Model.Title;
}

<h2 id="title">@ViewBag.Title</h2>

@using (Html.BeginForm("Save", "Games"))
{
    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="form-group">
        @Html.LabelFor(m => m.Name)
        @Html.TextBoxFor(m => m.Name, new { @class = "form-control" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.Price)
        @Html.TextBoxFor(m => m.Price, new { @class = "form-control" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.ImageName)
        @Html.TextBoxFor(m => m.ImageName, new { @class = "form-control" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.PlatformId)
        <label>Aktualnie: @Model.PlatformName</label>
        @Html.DropDownListFor(m => m.PlatformId, new SelectList(Model.Platforms, "Id", "Name"), "--Wybierz Platformę --", new { @class = "form-control" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.IsBestseller)
        @Html.CheckBoxFor(m => m.IsBestseller)
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.ReleaseDate)
        @Html.TextBoxFor(m => m.ReleaseDate, new { @class = "form-control" })
        @Html.ValidationMessageFor(m => m.ReleaseDate)
    </div>




    @Html.HiddenFor(m => m.Id)
    <button type="submit" id="submit-button">Save</button>
    if (Model.Id != 0)
    {
        <div class="form-group">
            <label for="CurrentCategories">Przypisane Kategorie</label>
            <select id="test" multiple="multiple" name="SelectedIds">
                <option value=""></option>
                @foreach (var category in Model.Category)
                {
                    <option id="option-@category.Id" value="@category.Id">@category.Name</option>
                }
            </select>
        </div>
    }

}
<div class="hidden" id="game-id-for-js" data-id="@Model.Id"></div>

@section scripts {@Scripts.Render("~/bundles/EditCategoryScripts")

<script>

    $('#submit-button').click(function () {

        var title = $('#title').html();

        console.log(title);

        if (title.toString() === "Edytuj Grę")
            alert("Gra została zaktualizowana!");
        else if (title.toString() === "Dodaj nową grę") {
            alert("Gra została zapisana! Teraz możesz przypisać jej kategorie!")
        }

    })


</script>

}





